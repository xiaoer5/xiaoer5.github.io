<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.23.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="整个环境是基于 Windows 11 + Virtualbox 来安装的 Ubuntu 24.04 系统中完成的 Ubuntu 24.04 系统信息如下 1234567891011## Ubuntu 版本w101@dev-pc:~&#x2F;workplace&#x2F;vexpress_env$ lsb_release -aNo LSB modules are available.Distributor ID:	U">
<meta property="og:type" content="article">
<meta property="og:title" content="QEMU 模拟 uboot 通过 SD 卡启动 Linux kernel">
<meta property="og:url" content="http://example.com/2025/04/12/qemu-uboot-kernel-sd-card/index.html">
<meta property="og:site_name" content="To Be Second">
<meta property="og:description" content="整个环境是基于 Windows 11 + Virtualbox 来安装的 Ubuntu 24.04 系统中完成的 Ubuntu 24.04 系统信息如下 1234567891011## Ubuntu 版本w101@dev-pc:~&#x2F;workplace&#x2F;vexpress_env$ lsb_release -aNo LSB modules are available.Distributor ID:	U">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-04-12T10:11:33.000Z">
<meta property="article:modified_time" content="2025-06-05T23:40:27.889Z">
<meta property="article:author" content="Second">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="kernel">
<meta property="article:tag" content="uboot">
<meta property="article:tag" content="ARM">
<meta property="article:tag" content="qemu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2025/04/12/qemu-uboot-kernel-sd-card/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/04/12/qemu-uboot-kernel-sd-card/","path":"2025/04/12/qemu-uboot-kernel-sd-card/","title":"QEMU 模拟 uboot 通过 SD 卡启动 Linux kernel"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>QEMU 模拟 uboot 通过 SD 卡启动 Linux kernel | To Be Second</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">To Be Second</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-ARM-%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%99%A8"><span class="nav-number">1.</span> <span class="nav-text">安装 ARM 交叉编译器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-%E7%BC%96%E8%AF%91-u-boot"><span class="nav-number">2.</span> <span class="nav-text">下载&amp;编译 u-boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-u-boot"><span class="nav-number">2.1.</span> <span class="nav-text">下载 u-boot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-%E7%BC%96%E8%AF%91"><span class="nav-number">2.2.</span> <span class="nav-text">配置 &amp; 编译</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-%E7%BC%96%E8%AF%91-kernel"><span class="nav-number">3.</span> <span class="nav-text">下载&amp;编译 kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-kernel"><span class="nav-number">3.1.</span> <span class="nav-text">下载 kernel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B-kernel"><span class="nav-number">3.2.</span> <span class="nav-text">解压 kernel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-%E7%BC%96%E8%AF%91-1"><span class="nav-number">3.3.</span> <span class="nav-text">配置 &amp; 编译</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">4.</span> <span class="nav-text">制作根文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-busybox"><span class="nav-number">4.1.</span> <span class="nav-text">下载 busybox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B-busybox"><span class="nav-number">4.2.</span> <span class="nav-text">解压 busybox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-busybox"><span class="nav-number">4.3.</span> <span class="nav-text">配置 busybox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E8%AF%91-busybox"><span class="nav-number">4.4.</span> <span class="nav-text">编译 busybox</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C-SD-%E5%8D%A1"><span class="nav-number">5.</span> <span class="nav-text">制作 SD 卡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QEMU-%E8%BF%90%E8%A1%8C-SD-%E5%8D%A1"><span class="nav-number">6.</span> <span class="nav-text">QEMU 运行 SD 卡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">7.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Second</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/12/qemu-uboot-kernel-sd-card/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Second">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To Be Second">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="QEMU 模拟 uboot 通过 SD 卡启动 Linux kernel | To Be Second">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          QEMU 模拟 uboot 通过 SD 卡启动 Linux kernel
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-12 18:11:33" itemprop="dateCreated datePublished" datetime="2025-04-12T18:11:33+08:00">2025-04-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-06-06 07:40:27" itemprop="dateModified" datetime="2025-06-06T07:40:27+08:00">2025-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux-kernel/" itemprop="url" rel="index"><span itemprop="name">Linux_kernel</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux-kernel/ARM/" itemprop="url" rel="index"><span itemprop="name">ARM</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux-kernel/ARM/kernel/" itemprop="url" rel="index"><span itemprop="name">kernel</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux-kernel/ARM/Boot/" itemprop="url" rel="index"><span itemprop="name">Boot</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>整个环境是基于 <code>Windows 11 + Virtualbox</code> 来安装的 Ubuntu 24.04 系统中完成的</p>
<p><code>Ubuntu 24.04</code> 系统信息如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Ubuntu 版本</span></span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Ubuntu</span><br><span class="line">Description:	Ubuntu 24.04.2 LTS</span><br><span class="line">Release:	24.04</span><br><span class="line">Codename:	noble</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Ubuntu Linux Kernel</span></span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ uname -a</span><br><span class="line">Linux dev-pc 6.8.0-57-generic #59-Ubuntu SMP PREEMPT_DYNAMIC Sat Mar 15 17:40:59 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="安装-ARM-交叉编译器"><a href="#安装-ARM-交叉编译器" class="headerlink" title="安装 ARM 交叉编译器"></a>安装 ARM 交叉编译器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install gcc-arm-linux-gnueabi</span><br></pre></td></tr></table></figure>

<p>安装完成后， 对应的交叉编译工具如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">w101@dev-pc:~/workplace/vexpress_env$ arm-linux-gnueabi-</span><br><span class="line">arm-linux-gnueabi-addr2line      arm-linux-gnueabi-gcc-ar         arm-linux-gnueabi-gcov-tool      arm-linux-gnueabi-objcopy</span><br><span class="line">arm-linux-gnueabi-ar             arm-linux-gnueabi-gcc-ar-13      arm-linux-gnueabi-gcov-tool-13   arm-linux-gnueabi-objdump</span><br><span class="line">arm-linux-gnueabi-as             arm-linux-gnueabi-gcc-nm         arm-linux-gnueabi-gold           arm-linux-gnueabi-ranlib</span><br><span class="line">arm-linux-gnueabi-c++filt        arm-linux-gnueabi-gcc-nm-13      arm-linux-gnueabi-gprof          arm-linux-gnueabi-readelf</span><br><span class="line">arm-linux-gnueabi-cpp            arm-linux-gnueabi-gcc-ranlib     arm-linux-gnueabi-ld             arm-linux-gnueabi-size</span><br><span class="line">arm-linux-gnueabi-cpp-13         arm-linux-gnueabi-gcc-ranlib-13  arm-linux-gnueabi-ld.bfd         arm-linux-gnueabi-strings</span><br><span class="line">arm-linux-gnueabi-dwp            arm-linux-gnueabi-gcov           arm-linux-gnueabi-ld.gold        arm-linux-gnueabi-strip</span><br><span class="line">arm-linux-gnueabi-elfedit        arm-linux-gnueabi-gcov-13        arm-linux-gnueabi-lto-dump</span><br><span class="line">arm-linux-gnueabi-gcc            arm-linux-gnueabi-gcov-dump      arm-linux-gnueabi-lto-dump-13</span><br><span class="line">arm-linux-gnueabi-gcc-13         arm-linux-gnueabi-gcov-dump-13   arm-linux-gnueabi-nm</span><br></pre></td></tr></table></figure>

<h2 id="下载-编译-u-boot"><a href="#下载-编译-u-boot" class="headerlink" title="下载&amp;编译 u-boot"></a>下载&amp;编译 u-boot</h2><h3 id="下载-u-boot"><a href="#下载-u-boot" class="headerlink" title="下载 u-boot"></a>下载 u-boot</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@source.denx.de:u-boot/u-boot.git</span><br></pre></td></tr></table></figure>

<p>对应的 <code>u-boot</code> 版本为 <code>2025.01-rc1</code> , 见对应的 <code>Makefile</code> 中的信息如下</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># SPDX-License-Identifier: GPL-2.0+</span><br><span class="line"></span><br><span class="line">VERSION = 2025</span><br><span class="line">PATCHLEVEL = 01</span><br><span class="line">SUBLEVEL =</span><br><span class="line">EXTRAVERSION = -rc1</span><br><span class="line">NAME =</span><br><span class="line"></span><br><span class="line"># *DOCUMENTATION*</span><br><span class="line"># To see a list of typical targets execute &quot;make help&quot;</span><br><span class="line"># More info can be located in ./README</span><br><span class="line"># Comments in this file are targeted only to the developer, do not</span><br><span class="line"># expect to learn how to build the kernel reading this file.</span><br><span class="line"></span><br><span class="line"># Do not use make&#x27;s built-in rules and variables</span><br><span class="line"># (this increases performance and avoids hard-to-debug behaviour)</span><br><span class="line">MAKEFLAGS += -rR</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="配置-编译"><a href="#配置-编译" class="headerlink" title="配置 &amp; 编译"></a>配置 &amp; 编译</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 进入 u-boot 目录</span></span><br><span class="line"><span class="built_in">cd</span> u-boot</span><br><span class="line"></span><br><span class="line"><span class="comment">## 配置</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- vexpress_ca9x4_defconfig</span><br><span class="line"></span><br><span class="line"><span class="comment">## 编译</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi-</span><br></pre></td></tr></table></figure>

<p>测试 u-boot</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-arm -M vexpress-a9 \</span><br><span class="line">     -kernel u-boot \</span><br><span class="line">     -nographic \</span><br><span class="line">     -m 512M</span><br></pre></td></tr></table></figure>

<p>出现如下打印信息，表示一切OK</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">w101@dev-pc:~/workplace/vexpress_env/u-boot$ qemu-system-arm -M vexpress-a9 \</span><br><span class="line">     -kernel u-boot \</span><br><span class="line">     -nographic \</span><br><span class="line">     -m 512M</span><br><span class="line"></span><br><span class="line">U-Boot 2025.01-rc1-00090-ge61ea9f2e5d2 (Apr 06 2025 - 13:46:20 +0800)</span><br><span class="line"></span><br><span class="line">DRAM:  512 MiB</span><br><span class="line">WARNING: Caches not enabled</span><br><span class="line">Core:  23 devices, 11 uclasses, devicetree: embed</span><br><span class="line">Flash: 128 MiB</span><br><span class="line">MMC:   mmci@5000: 0</span><br><span class="line">Loading Environment from Flash... *** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">In:    uart@9000</span><br><span class="line">Out:   uart@9000</span><br><span class="line">Err:   uart@9000</span><br><span class="line">Net:   eth0: ethernet@3,02000000</span><br><span class="line">Hit any key to stop autoboot:  0</span><br><span class="line">MMC Device 1 not found</span><br><span class="line">no mmc device at slot 1</span><br><span class="line">Card did not respond to voltage select! : -110</span><br><span class="line">smc911x: detected LAN9118 controller</span><br><span class="line">smc911x: phy initialized</span><br><span class="line">smc911x: MAC 52:54:00:12:34:56</span><br><span class="line">BOOTP broadcast 1</span><br><span class="line">BOOTP broadcast 2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="下载-编译-kernel"><a href="#下载-编译-kernel" class="headerlink" title="下载&amp;编译 kernel"></a>下载&amp;编译 kernel</h2><h3 id="下载-kernel"><a href="#下载-kernel" class="headerlink" title="下载 kernel"></a>下载 kernel</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.14.tar.xz</span><br></pre></td></tr></table></figure>

<h3 id="解压-kernel"><a href="#解压-kernel" class="headerlink" title="解压 kernel"></a>解压 kernel</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar Jxvf linux-6.14.tar.xz</span><br></pre></td></tr></table></figure>

<h3 id="配置-编译-1"><a href="#配置-编译-1" class="headerlink" title="配置 &amp; 编译"></a>配置 &amp; 编译</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 进入 linux kernel 源码</span></span><br><span class="line"><span class="built_in">cd</span> linux-6.14</span><br><span class="line"></span><br><span class="line"><span class="comment">## 配置</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- vexpress_defconfig O=./build</span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- menuconfig O=./build</span><br><span class="line"></span><br><span class="line"><span class="comment">## 编译</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- -j8 O=./build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者单独编译 zImage 和 dts, 命令如下:</span></span><br><span class="line"><span class="comment">## 编译 zImage</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- zImage -j8</span><br><span class="line"><span class="comment">## 编译 dts</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- dtbs</span><br></pre></td></tr></table></figure>

<p>生成的 <code>zImage</code> 和 <code>dts</code> 文件在目录 <code>build/arch/arm/boot/</code> 和 <code>build/arch/arm/boot/dts/arm/</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## zImage</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env/linux-6.14$ <span class="built_in">ls</span> build/arch/arm/boot/</span><br><span class="line">compressed  dts  Image  zImage</span><br><span class="line"></span><br><span class="line"><span class="comment">## dts</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env/linux-6.14$ <span class="built_in">ls</span> build/arch/arm/boot/dts/arm/*.dtb</span><br><span class="line">build/arch/arm/boot/dts/arm/vexpress-v2p-ca15_a7.dtb   build/arch/arm/boot/dts/arm/vexpress-v2p-ca5s.dtb</span><br><span class="line">build/arch/arm/boot/dts/arm/vexpress-v2p-ca15-tc1.dtb  build/arch/arm/boot/dts/arm/vexpress-v2p-ca9.dtb</span><br></pre></td></tr></table></figure>

<h2 id="制作根文件系统"><a href="#制作根文件系统" class="headerlink" title="制作根文件系统"></a>制作根文件系统</h2><p>以下基于 <code>busybox</code> 制作根文件系统 (也可以基于 <code>buildroot</code> , 后续在介绍)</p>
<h3 id="下载-busybox"><a href="#下载-busybox" class="headerlink" title="下载 busybox"></a>下载 busybox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.busybox.net/downloads/busybox-1.36.1.tar.bz2</span><br></pre></td></tr></table></figure>

<h3 id="解压-busybox"><a href="#解压-busybox" class="headerlink" title="解压 busybox"></a>解压 busybox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar jxvf busybox-1.36.1.tar.bz2</span><br></pre></td></tr></table></figure>

<h3 id="配置-busybox"><a href="#配置-busybox" class="headerlink" title="配置 busybox"></a>配置 busybox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 进入 busybox 目录</span></span><br><span class="line"><span class="built_in">cd</span> busybox-1.36.1/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 配置</span></span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- menuconfig</span><br></pre></td></tr></table></figure>

<p>选中如下配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Setting ---&gt;</span><br><span class="line">	--- Build Optioins</span><br><span class="line">	[*] Build static binary (no shared libs)</span><br><span class="line">	[ ] Force NOMMU build (NEW)</span><br><span class="line">	(arm-linux-gnueabi-) Cross compiler prefix</span><br></pre></td></tr></table></figure>

<h3 id="编译-busybox"><a href="#编译-busybox" class="headerlink" title="编译 busybox"></a>编译 busybox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi-</span><br><span class="line">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- install</span><br></pre></td></tr></table></figure>

<p><code>make install</code> 后，在busybox目录下生成 <code>_install</code> 目录，该目录下的程序 就是根文件系统中的程序。</p>
<p>然后使用如下命令生成根文件系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> rootfs</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> busybox-1.36.1/_install/*  rootfs/ -raf</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/proc/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/sys/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/tmp/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/root/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/var/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/mnt/</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> etc rootfs/ -arf</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -arf /usr/arm-linux-gnueabi/lib rootfs/</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> rootfs/lib/*.a</span><br><span class="line"><span class="built_in">sudo</span> arm-linux-gnueabi-strip rootfs/lib/*</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p rootfs/dev/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/tty1 c 4 1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/tty2 c 4 2</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/tty3 c 4 3</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/tty4 c 4 4</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/console c 5 1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mknod</span> rootfs/dev/null c 1 3</span><br></pre></td></tr></table></figure>

<p>以上 命令 执行完成后， 则生成根文件系统 <code>rootfs</code></p>
<h2 id="制作-SD-卡"><a href="#制作-SD-卡" class="headerlink" title="制作 SD 卡"></a>制作 SD 卡</h2><p>通过以上步骤，已编译出 <code>u-boot</code> 、 <code>zImage</code> 和 <code>dts</code>, 以及制作好 根文件系统 <code>rootfs</code></p>
<p>以下制作 <code>SD</code> 卡， 并把编译的文件  和 根文件系统保存到 <code>SD</code> 卡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1. 生成一个空的SD卡镜像</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=sd.img bs=1M count=512</span><br><span class="line">512+0 records <span class="keyword">in</span></span><br><span class="line">512+0 records out</span><br><span class="line">536870912 bytes (537 MB, 512 MiB) copied, 0.989246 s, 543 MB/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. 创建GPT分区，</span></span><br><span class="line"><span class="comment">### 创建了两个分区，</span></span><br><span class="line"><span class="comment">### 一个用来存放 zImage 和 dts，</span></span><br><span class="line"><span class="comment">### 另一个存放根文件系统</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ sgdisk -n 0:0:+64M -c 0:kernel sd.img</span><br><span class="line">Creating new GPT entries <span class="keyword">in</span> memory.</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot or after you</span><br><span class="line">run partprobe(8) or kpartx(8)</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ sgdisk -n 0:0:0 -c 0:rootfs sd.img</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot or after you</span><br><span class="line">run partprobe(8) or kpartx(8)</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3. 查看分区：</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ sgdisk -p sd.img</span><br><span class="line">Disk sd.img: 1048576 sectors, 512.0 MiB</span><br><span class="line">Sector size (logical): 512 bytes</span><br><span class="line">Disk identifier (GUID): D43E571C-071F-45BA-BA99-18C918623F9A</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">Main partition table begins at sector 2 and ends at sector 33</span><br><span class="line">First usable sector is 34, last usable sector is 1048542</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 2014 sectors (1007.0 KiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048          133119   64.0 MiB    8300  kernel</span><br><span class="line">   2          133120         1048542   447.0 MiB   8300  rootfs</span><br><span class="line"></span><br><span class="line"><span class="comment">## 4. 查找空闲的loop设备</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ losetup -f</span><br><span class="line">/dev/loop19</span><br><span class="line"></span><br><span class="line"><span class="comment">## 5. 将SD卡镜像映射到loop设备上</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ <span class="built_in">sudo</span> losetup /dev/loop19 sd.img</span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ <span class="built_in">sudo</span> partprobe /dev/loop19</span><br><span class="line"></span><br><span class="line"><span class="comment">### 此时会看到 /dev/loop19p1 和 /dev/loop19p2 两个节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 6. 格式化</span></span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ <span class="built_in">sudo</span> mkfs.ext4 /dev/loop19p1</span><br><span class="line">w101@dev-pc:~/workplace/vexpress_env$ <span class="built_in">sudo</span> mkfs.ext4 /dev/loop19p2</span><br><span class="line"></span><br><span class="line"><span class="comment">## 7. 挂载</span></span><br><span class="line"><span class="built_in">mkdir</span> p1</span><br><span class="line"><span class="built_in">mkdir</span> p2</span><br><span class="line"><span class="built_in">sudo</span> mount -t ext4 /dev/loop19p1 p1/</span><br><span class="line"><span class="built_in">sudo</span> mount -t ext4 /dev/loop19p2 p2/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 8. 拷贝文件</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> linux-6.14/build/arch/arm/boot/zImage p1/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> linux-6.14/build/arch/arm/boot/dts/arm/*.dtb p1/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -raf rootfs/* p2/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 9.umount</span></span><br><span class="line"><span class="built_in">sudo</span> umount p1 p2</span><br><span class="line"><span class="built_in">sudo</span> losetup -d /dev/loop19</span><br></pre></td></tr></table></figure>

<h2 id="QEMU-运行-SD-卡"><a href="#QEMU-运行-SD-卡" class="headerlink" title="QEMU 运行 SD 卡"></a>QEMU 运行 SD 卡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w101@dev-pc:~/workplace/vexpress_env$ qemu-system-arm -M vexpress-a9 -m 512M -kernel u-boot/u-boot -nographic -sd sd.img -append <span class="string">&quot;root=/dev/mmcblk0p2 console=ttyAMA0&quot;</span></span><br></pre></td></tr></table></figure>

<p>当运行到 <code>Hit any key to stop autoboot:  3 </code>  倒计时时， 按下 <code>Enter</code> 键， 并进行从SD加载Linux kernel和 dts的设置</p>
<p>u-boot 命令行下的相关命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=&gt; mmc dev 0</span><br><span class="line">=&gt; mmc info</span><br><span class="line">=&gt; part list mmc 0</span><br><span class="line">=&gt; <span class="built_in">ls</span> mmc 0:1</span><br><span class="line">=&gt; <span class="built_in">ls</span> mmc 0:2</span><br><span class="line">=&gt; load mmc 0:1 0x60008000 zImage</span><br><span class="line">=&gt; load mmc 0:1 0x61000000 vexpress-v2p-ca9.dtb</span><br><span class="line">=&gt; setenv bootargs <span class="string">&#x27;root=/dev/mmcblk0p2 rw rootfstype=ext4 rootwait earlycon</span></span><br><span class="line"><span class="string">=&gt; bootz 0x60008000 - 0x61000000</span></span><br></pre></td></tr></table></figure>

<p>对应的命令输出如下所示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line">w101@dev-pc:~/workplace/vexpress_env$ qemu-system-arm -M vexpress-a9 -m 512M -kernel u-boot/u-boot -nographic -sd sd.img -append <span class="string">&quot;root=/dev/mmcblk0p2 console=ttyAMA0&quot;</span></span><br><span class="line">WARNING: Image format was not specified <span class="keyword">for</span> <span class="string">&#x27;sd.img&#x27;</span> and probing guessed raw.</span><br><span class="line">         Automatically detecting the format is dangerous <span class="keyword">for</span> raw images, write operations on block 0 will be restricted.</span><br><span class="line">         Specify the <span class="string">&#x27;raw&#x27;</span> format explicitly to remove the restrictions.</span><br><span class="line">pulseaudio: set_sink_input_volume() failed</span><br><span class="line">pulseaudio: Reason: Invalid argument</span><br><span class="line">pulseaudio: set_sink_input_mute() failed</span><br><span class="line">pulseaudio: Reason: Invalid argument</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">U-Boot 2025.01-rc1-00090-ge61ea9f2e5d2 (Apr 06 2025 - 13:46:20 +0800)</span><br><span class="line"></span><br><span class="line">DRAM:  512 MiB</span><br><span class="line">WARNING: Caches not enabled</span><br><span class="line">Core:  23 devices, 11 uclasses, devicetree: embed</span><br><span class="line">Flash: 128 MiB</span><br><span class="line">MMC:   mmci@5000: 0</span><br><span class="line">Loading Environment from Flash... *** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">In:    uart@9000</span><br><span class="line">Out:   uart@9000</span><br><span class="line">Err:   uart@9000</span><br><span class="line">Net:   eth0: ethernet@3,02000000</span><br><span class="line">Hit any key to stop autoboot:  0</span><br><span class="line">=&gt; mmc dev 0</span><br><span class="line">switch to partitions <span class="comment">#0, OK</span></span><br><span class="line">mmc0 is current device</span><br><span class="line">=&gt; mmc info</span><br><span class="line">Device: mmci@5000</span><br><span class="line">Manufacturer ID: aa</span><br><span class="line">OEM: 5859</span><br><span class="line">Name: QEMU!</span><br><span class="line">Bus Speed: 12000000</span><br><span class="line">Mode: MMC legacy</span><br><span class="line">Rd Block Len: 512</span><br><span class="line">SD version 3.0</span><br><span class="line">High Capacity: No</span><br><span class="line">Capacity: 512 MiB</span><br><span class="line">Bus Width: 1-bit</span><br><span class="line">Erase Group Size: 512 Bytes</span><br><span class="line">=&gt; part list mmc 0</span><br><span class="line"></span><br><span class="line">Partition Map <span class="keyword">for</span> mmc device 0  --   Partition Type: EFI</span><br><span class="line"></span><br><span class="line">Part	Start LBA	End LBA		Name</span><br><span class="line">	Attributes</span><br><span class="line">	Type GUID</span><br><span class="line">	Partition GUID</span><br><span class="line">  1	0x00000800	0x000207ff	<span class="string">&quot;kernel&quot;</span></span><br><span class="line">	attrs:	0x0000000000000000</span><br><span class="line">	<span class="built_in">type</span>:	0fc63daf-8483-4772-8e79-3d69d8477de4</span><br><span class="line">	guid:	90ac0a30-6c3a-44f7-8c4e-df4517b4b31e</span><br><span class="line">  2	0x00020800	0x000fffde	<span class="string">&quot;rootfs&quot;</span></span><br><span class="line">	attrs:	0x0000000000000000</span><br><span class="line">	<span class="built_in">type</span>:	0fc63daf-8483-4772-8e79-3d69d8477de4</span><br><span class="line">	guid:	a1619328-dbbd-42cf-8eee-3dbce2309a83</span><br><span class="line">=&gt; <span class="built_in">ls</span> mmc 0:1</span><br><span class="line">&lt;DIR&gt;       4096 .</span><br><span class="line">&lt;DIR&gt;       4096 ..</span><br><span class="line">&lt;DIR&gt;      16384 lost+found</span><br><span class="line">         5912432 zImage</span><br><span class="line">           18711 vexpress-v2p-ca15_a7.dtb</span><br><span class="line">           13104 vexpress-v2p-ca15-tc1.dtb</span><br><span class="line">           12704 vexpress-v2p-ca5s.dtb</span><br><span class="line">           14329 vexpress-v2p-ca9.dtb</span><br><span class="line">=&gt; <span class="built_in">ls</span> mmc 0:2</span><br><span class="line">&lt;DIR&gt;       4096 .</span><br><span class="line">&lt;DIR&gt;       4096 ..</span><br><span class="line">&lt;DIR&gt;      16384 lost+found</span><br><span class="line">&lt;DIR&gt;       4096 bin</span><br><span class="line">&lt;DIR&gt;       4096 dev</span><br><span class="line">&lt;DIR&gt;       4096 etc</span><br><span class="line">&lt;DIR&gt;       4096 lib</span><br><span class="line">&lt;SYM&gt;         11 linuxrc</span><br><span class="line">&lt;DIR&gt;       4096 mnt</span><br><span class="line">&lt;DIR&gt;       4096 proc</span><br><span class="line">&lt;DIR&gt;       4096 root</span><br><span class="line">&lt;DIR&gt;       4096 sbin</span><br><span class="line">&lt;DIR&gt;       4096 sys</span><br><span class="line">&lt;DIR&gt;       4096 tmp</span><br><span class="line">&lt;DIR&gt;       4096 usr</span><br><span class="line">&lt;DIR&gt;       4096 var</span><br><span class="line">=&gt; load mmc 0:1 0x60008000 zImage</span><br><span class="line">5912432 bytes <span class="built_in">read</span> <span class="keyword">in</span> 9094 ms (634.8 KiB/s)</span><br><span class="line">=&gt; load mmc 0:1 0x61000000 vexpress-v2p-ca9.dtb</span><br><span class="line">14329 bytes <span class="built_in">read</span> <span class="keyword">in</span> 32 ms (436.5 KiB/s)</span><br><span class="line">=&gt; setenv bootargs <span class="string">&#x27;root=/dev/mmcblk0p2 rw rootfstype=ext4 rootwait earlycon console=tty0 console=ttyAMA0 init=/linuxrc ignore_loglevel&#x27;</span></span><br><span class="line">=&gt; bootz 0x60008000 - 0x61000000</span><br><span class="line">Kernel image @ 0x60008000 [ 0x000000 - 0x5a3770 ]</span><br><span class="line"><span class="comment">## Flattened Device Tree blob at 61000000</span></span><br><span class="line">   Booting using the fdt blob at 0x61000000</span><br><span class="line">Working FDT <span class="built_in">set</span> to 61000000</span><br><span class="line">   Loading Device Tree to 7eb0c000, end 7eb127f8 ... OK</span><br><span class="line">Working FDT <span class="built_in">set</span> to 7eb0c000</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">Booting Linux on physical CPU 0x0</span><br><span class="line">Linux version 6.14.0 (w512@dev-pc) (arm-linux-gnueabi-gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, GNU ld (GNU Binutils <span class="keyword">for</span> Ubuntu) 2.42) <span class="comment">#1 SMP Sun Apr  6 14:02:45 CST 2025</span></span><br><span class="line">CPU: ARMv7 Processor [410fc090] revision 0 (ARMv7), cr=10c5387d</span><br><span class="line">CPU: PIPT / VIPT nonaliasing data cache, VIPT nonaliasing instruction cache</span><br><span class="line">OF: fdt: Machine model: V2P-CA9</span><br><span class="line">OF: fdt: Ignoring memory block 0x80000000 - 0x80000004</span><br><span class="line">earlycon: pl11 at MMIO 0x10009000 (options <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">printk: legacy bootconsole [pl11] enabled</span><br><span class="line">printk: debug: ignoring loglevel setting.</span><br><span class="line">Memory policy: Data cache writeback</span><br><span class="line">cma: Reserved 16 MiB at 0x7f000000 on node -1</span><br><span class="line">Zone ranges:</span><br><span class="line">  Normal   [mem 0x0000000060000000-0x000000007fffffff]</span><br><span class="line">Movable zone start <span class="keyword">for</span> each node</span><br><span class="line">Early memory node ranges</span><br><span class="line">  node   0: [mem 0x0000000060000000-0x000000007fffffff]</span><br><span class="line">Initmem setup node 0 [mem 0x0000000060000000-0x000000007fffffff]</span><br><span class="line">Reserved memory: created DMA memory pool at 0x4c000000, size 8 MiB</span><br><span class="line">OF: reserved mem: initialized node vram@4c000000, compatible <span class="built_in">id</span> shared-dma-pool</span><br><span class="line">OF: reserved mem: 0x4c000000..0x4c7fffff (8192 KiB) nomap non-reusable vram@4c000000</span><br><span class="line">CPU: All CPU(s) started <span class="keyword">in</span> SVC mode.</span><br><span class="line">percpu: Embedded 17 pages/cpu s38412 r8192 d23028 u69632</span><br><span class="line">pcpu-alloc: s38412 r8192 d23028 u69632 alloc=17*4096</span><br><span class="line">pcpu-alloc: [0] 0 [0] 1 [0] 2 [0] 3</span><br><span class="line">Kernel <span class="built_in">command</span> line: root=/dev/mmcblk0p2 rw rootfstype=ext4 rootwait earlycon console=tty0 console=ttyAMA0 init=/linuxrc ignore_loglevel</span><br><span class="line">printk: log_buf_len individual max cpu contribution: 4096 bytes</span><br><span class="line">printk: log_buf_len total cpu_extra contributions: 12288 bytes</span><br><span class="line">printk: log_buf_len min size: 16384 bytes</span><br><span class="line">printk: <span class="built_in">log</span> buffer data + meta data: 32768 + 102400 = 135168 bytes</span><br><span class="line">printk: early <span class="built_in">log</span> buf free: 14652(89%)</span><br><span class="line">Dentry cache <span class="built_in">hash</span> table entries: 65536 (order: 6, 262144 bytes, linear)</span><br><span class="line">Inode-cache <span class="built_in">hash</span> table entries: 32768 (order: 5, 131072 bytes, linear)</span><br><span class="line">Built 1 zonelists, mobility grouping on.  Total pages: 131072</span><br><span class="line">mem auto-init: stack:all(zero), heap alloc:off, heap free:off</span><br><span class="line">SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1</span><br><span class="line">rcu: Hierarchical RCU implementation.</span><br><span class="line">rcu: 	RCU event tracing is enabled.</span><br><span class="line">rcu: 	RCU restricting CPUs from NR_CPUS=8 to nr_cpu_ids=4.</span><br><span class="line">	Tracing variant of Tasks RCU enabled.</span><br><span class="line">rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.</span><br><span class="line">rcu: Adjusting geometry <span class="keyword">for</span> rcu_fanout_leaf=16, nr_cpu_ids=4</span><br><span class="line">RCU Tasks Trace: Setting <span class="built_in">shift</span> to 2 and lim to 1 rcu_task_cb_adjust=1 rcu_task_cpu_ids=4.</span><br><span class="line">NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16</span><br><span class="line">GIC CPU mask not found - kernel will fail to boot.</span><br><span class="line">GIC CPU mask not found - kernel will fail to boot.</span><br><span class="line">L2C: platform modifies aux control register: 0x02020000 -&gt; 0x02420000</span><br><span class="line">L2C: DT/platform modifies aux control register: 0x02020000 -&gt; 0x02420000</span><br><span class="line">L2C-310 enabling early BRESP <span class="keyword">for</span> Cortex-A9</span><br><span class="line">L2C-310 full line of zeros enabled <span class="keyword">for</span> Cortex-A9</span><br><span class="line">L2C-310 dynamic clock gating disabled, standby mode disabled</span><br><span class="line">L2C-310 cache controller enabled, 8 ways, 128 kB</span><br><span class="line">L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x46420001</span><br><span class="line">rcu: srcu_init: Setting srcu_struct sizes based on contention.</span><br><span class="line">sched_clock: 32 bits at 24MHz, resolution 41ns, wraps every 89478484971ns</span><br><span class="line">clocksource: arm,sp804: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 1911260446275 ns</span><br><span class="line">smp_twd: clock not found -2</span><br><span class="line">Console: colour dummy device 80x30</span><br><span class="line">printk: legacy console [tty0] enabled</span><br><span class="line">Calibrating <span class="built_in">local</span> timer... 101.32MHz.</span><br><span class="line">Calibrating delay loop... 2845.90 BogoMIPS (lpj=14229504)</span><br><span class="line">CPU: Testing write buffer coherency: ok</span><br><span class="line">CPU0: Spectre v2: using BPIALL workaround</span><br><span class="line">pid_max: default: 32768 minimum: 301</span><br><span class="line">Mount-cache <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes, linear)</span><br><span class="line">Mountpoint-cache <span class="built_in">hash</span> table entries: 1024 (order: 0, 4096 bytes, linear)</span><br><span class="line">CPU0: thread -1, cpu 0, socket 0, mpidr 80000000</span><br><span class="line">Setting up static identity map <span class="keyword">for</span> 0x60100000 - 0x60100060</span><br><span class="line">rcu: Hierarchical SRCU implementation.</span><br><span class="line">rcu: 	Max phase no-delay instances is 1000.</span><br><span class="line">Timer migration: 1 hierarchy levels; 8 children per group; 1 crossnode level</span><br><span class="line">smp: Bringing up secondary CPUs ...</span><br><span class="line">smp: Brought up 1 node, 1 CPU</span><br><span class="line">SMP: Total of 1 processors activated (2845.90 BogoMIPS).</span><br><span class="line">CPU: All CPU(s) started <span class="keyword">in</span> SVC mode.</span><br><span class="line">Memory: 486388K/524288K available (9216K kernel code, 747K rwdata, 2156K rodata, 1024K init, 187K bss, 19264K reserved, 16384K cma-reserved)</span><br><span class="line">devtmpfs: initialized</span><br><span class="line">VFP support v0.3: implementor 41 architecture 3 part 30 variant 9 rev 0</span><br><span class="line">clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns</span><br><span class="line">futex <span class="built_in">hash</span> table entries: 1024 (order: 4, 65536 bytes, linear)</span><br><span class="line">NET: Registered PF_NETLINK/PF_ROUTE protocol family</span><br><span class="line">DMA: preallocated 256 KiB pool <span class="keyword">for</span> atomic coherent allocations</span><br><span class="line">cpuidle: using governor ladder</span><br><span class="line">hw-breakpoint: debug architecture 0x4 unsupported.</span><br><span class="line">Serial: AMBA PL011 UART driver</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /clcd@10020000</span><br><span class="line">/clcd@10020000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">SCSI subsystem initialized</span><br><span class="line">libata version 3.00 loaded.</span><br><span class="line">usbcore: registered new interface driver usbfs</span><br><span class="line">usbcore: registered new interface driver hub</span><br><span class="line">usbcore: registered new device driver usb</span><br><span class="line">/clcd@10020000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/clcd@1f000</span><br><span class="line">/bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/i2c@16000/dvi-transmitter@39: Fixed dependency cycle(s) with /clcd@10020000</span><br><span class="line">pps_core: LinuxPPS API ver. 1 registered</span><br><span class="line">pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;</span><br><span class="line">PTP clock support registered</span><br><span class="line">Advanced Linux Sound Architecture Driver Initialized.</span><br><span class="line">clocksource: Switched to clocksource arm,sp804</span><br><span class="line">NET: Registered PF_INET protocol family</span><br><span class="line">IP idents <span class="built_in">hash</span> table entries: 8192 (order: 4, 65536 bytes, linear)</span><br><span class="line">tcp_listen_portaddr_hash <span class="built_in">hash</span> table entries: 512 (order: 0, 4096 bytes, linear)</span><br><span class="line">Table-perturb <span class="built_in">hash</span> table entries: 65536 (order: 6, 262144 bytes, linear)</span><br><span class="line">TCP established <span class="built_in">hash</span> table entries: 4096 (order: 2, 16384 bytes, linear)</span><br><span class="line">TCP <span class="built_in">bind</span> <span class="built_in">hash</span> table entries: 4096 (order: 4, 65536 bytes, linear)</span><br><span class="line">TCP: Hash tables configured (established 4096 <span class="built_in">bind</span> 4096)</span><br><span class="line">UDP <span class="built_in">hash</span> table entries: 256 (order: 1, 14336 bytes, linear)</span><br><span class="line">UDP-Lite <span class="built_in">hash</span> table entries: 256 (order: 1, 14336 bytes, linear)</span><br><span class="line">NET: Registered PF_UNIX/PF_LOCAL protocol family</span><br><span class="line">RPC: Registered named UNIX socket transport module.</span><br><span class="line">RPC: Registered udp transport module.</span><br><span class="line">RPC: Registered tcp transport module.</span><br><span class="line">RPC: Registered tcp-with-tls transport module.</span><br><span class="line">RPC: Registered tcp NFSv4.1 backchannel transport module.</span><br><span class="line">workingset: timestamp_bits=30 max_order=17 bucket_order=0</span><br><span class="line">squashfs: version 4.0 (2009/01/31) Phillip Lougher</span><br><span class="line">jffs2: version 2.2. (NAND) © 2001-2006 Red Hat, Inc.</span><br><span class="line">9p: Installing v9fs 9p2000 file system support</span><br><span class="line">io scheduler mq-deadline registered</span><br><span class="line">io scheduler kyber registered</span><br><span class="line">io scheduler bfq registered</span><br><span class="line">ledtrig-cpu: registered to indicate activity on CPUs</span><br><span class="line">sii902x 0-0060: supply iovcc not found, using dummy regulator</span><br><span class="line">sii902x 0-0060: supply cvcc12 not found, using dummy regulator</span><br><span class="line">simple-pm-bus bus@40000000:motherboard-bus@40000000:iofpga@7,00000000: Failed to create device <span class="built_in">link</span> (0x180) with supplier dcc:clock-controller-2 <span class="keyword">for</span> /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/sysctl@1000</span><br><span class="line">simple-pm-bus bus@40000000:motherboard-bus@40000000:iofpga@7,00000000: Failed to create device <span class="built_in">link</span> (0x180) with supplier dcc:clock-controller-2 <span class="keyword">for</span> /bus@40000000/motherboard-bus@40000000/iofpga@7,00000000/sysctl@1000</span><br><span class="line">physmap-flash 40000000.flash: physmap platform flash device: [mem 0x40000000-0x43ffffff]</span><br><span class="line">40000000.flash: Found 2 x16 devices at 0x0 <span class="keyword">in</span> 32-bit bank. Manufacturer ID 0x000000 Chip ID 0x000000</span><br><span class="line">Intel/Sharp Extended Query Table at 0x0031</span><br><span class="line">Using buffer write method</span><br><span class="line">erase region 0: offset=0x0,size=0x40000,blocks=256</span><br><span class="line">physmap-flash 40000000.flash: physmap platform flash device: [mem 0x44000000-0x47ffffff]</span><br><span class="line">40000000.flash: Found 2 x16 devices at 0x0 <span class="keyword">in</span> 32-bit bank. Manufacturer ID 0x000000 Chip ID 0x000000</span><br><span class="line">Intel/Sharp Extended Query Table at 0x0031</span><br><span class="line">Using buffer write method</span><br><span class="line">erase region 0: offset=0x0,size=0x40000,blocks=256</span><br><span class="line">Concatenating MTD devices:</span><br><span class="line">(0): <span class="string">&quot;40000000.flash&quot;</span></span><br><span class="line">(1): <span class="string">&quot;40000000.flash&quot;</span></span><br><span class="line">into device <span class="string">&quot;40000000.flash&quot;</span></span><br><span class="line">physmap-flash 48000000.psram: physmap platform flash device: [mem 0x48000000-0x49ffffff]</span><br><span class="line">smsc911x 4e000000.ethernet eth0: MAC Address: 52:54:00:12:34:56</span><br><span class="line">isp1760 4f000000.usb: isp1760 bus width: 32, oc: digital</span><br><span class="line">isp1760 4f000000.usb: NXP ISP1760 USB Host Controller</span><br><span class="line">isp1760 4f000000.usb: new USB bus registered, assigned bus number 1</span><br><span class="line">isp1760 4f000000.usb: Scratch <span class="built_in">test</span> failed. 0x00000000</span><br><span class="line">isp1760 4f000000.usb: can<span class="string">&#x27;t setup: -19</span></span><br><span class="line"><span class="string">isp1760 4f000000.usb: USB bus 1 deregistered</span></span><br><span class="line"><span class="string">usbcore: registered new interface driver usb-storage</span></span><br><span class="line"><span class="string">rtc-pl031 10017000.rtc: registered as rtc0</span></span><br><span class="line"><span class="string">rtc-pl031 10017000.rtc: setting system clock to 2025-04-06T09:09:16 UTC (1743930556)</span></span><br><span class="line"><span class="string">mmci-pl18x 10005000.mmci: Got CD GPIO</span></span><br><span class="line"><span class="string">mmci-pl18x 10005000.mmci: Got WP GPIO</span></span><br><span class="line"><span class="string">input: AT Raw Set 2 keyboard as /devices/platform/bus@40000000/bus@40000000:motherboard-bus@40000000/bus@40000000:motherboard-bus@40000000:iofpga@7,00000000/10006000.kmi/serio0/input/input0</span></span><br><span class="line"><span class="string">mmci-pl18x 10005000.mmci: mmc0: PL181 manf 41 rev0 at 0x10005000 irq 31,32 (pio)</span></span><br><span class="line"><span class="string">usbcore: registered new interface driver usbhid</span></span><br><span class="line"><span class="string">usbhid: USB HID core driver</span></span><br><span class="line"><span class="string">hw perfevents: enabled with armv7_cortex_a9 PMU driver, 7 (8000003f) counters available</span></span><br><span class="line"><span class="string">mmc0: new SD card at address 3ba3</span></span><br><span class="line"><span class="string">mmcblk0: mmc0:3ba3 QEMU! 512 MiB</span></span><br><span class="line"><span class="string">aaci-pl041 10004000.aaci: ARM AC&#x27;</span>97 Interface PL041 rev0 at 0x10004000, irq 37</span><br><span class="line">aaci-pl041 10004000.aaci: FIFO 512 entries</span><br><span class="line">NET: Registered PF_PACKET protocol family</span><br><span class="line">9pnet: Installing 9P2000 support</span><br><span class="line">Registering SWP/SWPB emulation handler</span><br><span class="line">input: ImExPS/2 Generic Explorer Mouse as /devices/platform/bus@40000000/bus@40000000:motherboard-bus@40000000/bus@40000000:motherboard-bus@40000000:iofpga@7,00000000/10007000.kmi/serio1/input/input2</span><br><span class="line">10009000.serial: ttyAMA0 at MMIO 0x10009000 (irq = 38, base_baud = 0) is a PL011 rev1</span><br><span class="line">printk: legacy console [ttyAMA0] enabled</span><br><span class="line">printk: legacy console [ttyAMA0] enabled</span><br><span class="line">printk: legacy bootconsole [pl11] disabled</span><br><span class="line">printk: legacy bootconsole [pl11] disabled</span><br><span class="line"> mmcblk0: p1 p2</span><br><span class="line">1000a000.serial: ttyAMA1 at MMIO 0x1000a000 (irq = 39, base_baud = 0) is a PL011 rev1</span><br><span class="line">1000b000.serial: ttyAMA2 at MMIO 0x1000b000 (irq = 40, base_baud = 0) is a PL011 rev1</span><br><span class="line">1000c000.serial: ttyAMA3 at MMIO 0x1000c000 (irq = 41, base_baud = 0) is a PL011 rev1</span><br><span class="line">drm-clcd-pl111 1001f000.clcd: assigned reserved memory node vram@4c000000</span><br><span class="line">drm-clcd-pl111 1001f000.clcd: using device-specific reserved memory</span><br><span class="line">drm-clcd-pl111 1001f000.clcd: core tile graphics present</span><br><span class="line">drm-clcd-pl111 1001f000.clcd: this device will be deactivated</span><br><span class="line">drm-clcd-pl111 1001f000.clcd: Versatile Express init failed - -19</span><br><span class="line">drm-clcd-pl111 10020000.clcd: DVI muxed to daughterboard 1 (core tile) CLCD</span><br><span class="line">drm-clcd-pl111 10020000.clcd: initializing Versatile Express PL111</span><br><span class="line">drm-clcd-pl111 10020000.clcd: DVI muxed to daughterboard 1 (core tile) CLCD</span><br><span class="line">drm-clcd-pl111 10020000.clcd: initializing Versatile Express PL111</span><br><span class="line">drm-clcd-pl111 10020000.clcd: DVI muxed to daughterboard 1 (core tile) CLCD</span><br><span class="line">drm-clcd-pl111 10020000.clcd: initializing Versatile Express PL111</span><br><span class="line">clk: Disabling unused clocks</span><br><span class="line">ALSA device list:</span><br><span class="line">  <span class="comment">#0: ARM AC&#x27;97 Interface PL041 rev0 at 0x10004000, irq 37</span></span><br><span class="line">EXT4-fs (mmcblk0p2): recovery complete</span><br><span class="line">EXT4-fs (mmcblk0p2): mounted filesystem 6afd9b97-bfc0-4b42-a55a-0511064a0620 r/w with ordered data mode. Quota mode: disabled.</span><br><span class="line">VFS: Mounted root (ext4 filesystem) on device 179:2.</span><br><span class="line">Freeing unused kernel image (initmem) memory: 1024K</span><br><span class="line">Run /linuxrc as init process</span><br><span class="line">  with arguments:</span><br><span class="line">    /linuxrc</span><br><span class="line">  with environment:</span><br><span class="line">    HOME=/</span><br><span class="line">    TERM=linux</span><br><span class="line">random: crng init <span class="keyword">done</span></span><br><span class="line">mount: mounting debugfs on /sys/kernel/debug failed: No such file or directory</span><br><span class="line">/etc/init.d/rcS: line 14: can<span class="string">&#x27;t create /proc/sys/kernel/hotplug: nonexistent directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Please press Enter to activate this console. drm-clcd-pl111 10020000.clcd: DVI muxed to daughterboard 1 (core tile) CLCD</span></span><br><span class="line"><span class="string">drm-clcd-pl111 10020000.clcd: initializing Versatile Express PL111</span></span><br><span class="line"><span class="string">i2c 0-0039: deferred probe pending: sii902x: Failed to find remote bridge</span></span><br><span class="line"><span class="string">amba 1000f000.wdt: deferred probe pending: (reason unknown)</span></span><br><span class="line"><span class="string">amba 10020000.clcd: deferred probe pending: (reason unknown)</span></span><br><span class="line"><span class="string">amba 100e0000.memory-controller: deferred probe pending: (reason unknown)</span></span><br><span class="line"><span class="string">amba 100e1000.memory-controller: deferred probe pending: (reason unknown)</span></span><br><span class="line"><span class="string">amba 100e5000.watchdog: deferred probe pending: (reason unknown)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@vexpress ]#</span></span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengdonglin137/p/5023342.html">用Qemu模拟vexpress-a9 （一） — 搭建Linux kernel调试环境 - dolinux - 博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengdonglin137/p/5023608.html">用Qemu模拟vexpress-a9 （二） — 搭建u-boot调试环境 - dolinux - 博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengdonglin137/p/5023704.html">用Qemu模拟vexpress-a9 （三）— 实现用u-boot引导Linux内核 - dolinux - 博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengdonglin137/p/12194548.html">用QEMU模拟运行uboot从SD卡启动Linux - dolinux - 博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weiqifa0/article/details/108878062">Linux利器：QEMU！用它模拟开发板能替代真开发板？-CSDN博客</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/linux/" rel="tag"># linux</a>
              <a href="/tags/kernel/" rel="tag"># kernel</a>
              <a href="/tags/uboot/" rel="tag"># uboot</a>
              <a href="/tags/ARM/" rel="tag"># ARM</a>
              <a href="/tags/qemu/" rel="tag"># qemu</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/04/11/pcie_bus/pcie_bus_study_1/" rel="prev" title="PCIe Architectural Perspective">
                  <i class="fa fa-angle-left"></i> PCIe Architectural Perspective
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/06/06/linux_kernel_intro/" rel="next" title="Linux Kernel Introduction">
                  Linux Kernel Introduction <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Second</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
